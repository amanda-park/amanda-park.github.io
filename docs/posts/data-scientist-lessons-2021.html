<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.550">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Amanda Park">
<meta name="dcterms.date" content="2021-02-28">
<meta name="description" content="Data science is considered one of the “sexiest jobs” of the 21st century. I figured I would throw my hat into the ring and describe what it has been like being a data scientist in healthcare for the last 18 months!">

<title>Amanda Park - Five Things I Have Learned Being a Data Scientist</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Amanda Park</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="../index.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
    <a href="https://www.linkedin.com/in/parkamanda" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-linkedin"></i></a>
    <a href="https://www.github.com/amanda-park" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Five Things I Have Learned Being a Data Scientist</h1>
                  <div>
        <div class="description">
          Data science is considered one of the “sexiest jobs” of the 21st century. I figured I would throw my hat into the ring and describe what it has been like being a data scientist in healthcare for the last 18 months!
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">data-science</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Amanda Park </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">February 28, 2021</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#the-data-is-usually-ugly" id="toc-the-data-is-usually-ugly" class="nav-link active" data-scroll-target="#the-data-is-usually-ugly">1. The Data Is (Usually) Ugly</a></li>
  <li><a href="#storytelling-is-key" id="toc-storytelling-is-key" class="nav-link" data-scroll-target="#storytelling-is-key">2. Storytelling is Key</a></li>
  <li><a href="#everybody-loves-python" id="toc-everybody-loves-python" class="nav-link" data-scroll-target="#everybody-loves-python">3. Everybody Loves Python</a></li>
  <li><a href="#you-cant-know-everything" id="toc-you-cant-know-everything" class="nav-link" data-scroll-target="#you-cant-know-everything">4. You Can’t Know Everything</a></li>
  <li><a href="#its-satisfying-work" id="toc-its-satisfying-work" class="nav-link" data-scroll-target="#its-satisfying-work">5. It’s Satisfying Work</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>Data science is considered one of the “sexiest jobs” of the 21st century. I figured I would throw my hat into the ring and describe what it has been like being a data scientist in healthcare for the last 18 months!</p>
<section id="the-data-is-usually-ugly" class="level2">
<h2 class="anchored" data-anchor-id="the-data-is-usually-ugly">1. The Data Is (Usually) Ugly</h2>
<p>In grad school, a lot of the datasets that my cohort worked with were relatively clean. They were canned datasets so there were no ambiguities about data definitions, and there were few, if any, missing values. (Well, outside the lecture where we were taught about missing values, that is.)</p>
<p>Real-life data isn’t like that. Often a lot of work goes into just cleaning up the data so that it can be reasonably used for analysis.</p>
<p>For example, being in a large healthcare system, data defintions aren’t always clear nor consistent. When looking across different parts of the organization, a lot of work often goes into making sure defintions for data being stored “match”. Much more emphasis goes into merging and maintaining those datasets than is ever discussed while in school.</p>
<p>Data is also generally not structured in the best format for analysis. You often have to structure the data so that it’s appropriate for ingestion into an algorithm. This can be done via SQL or through programming language packages like the Tidyverse (for R) or Pandas (for Python).</p>
<p>In general, sometimes you’re just a data janitor, not a data scientist. Perfect data never exists.</p>
</section>
<section id="storytelling-is-key" class="level2">
<h2 class="anchored" data-anchor-id="storytelling-is-key">2. Storytelling is Key</h2>
<p>When I was a teenager, I wanted to be a journalist. I dreamed of reporting on the biggest stories going on in the world and providing that information to regular citizens in an easily digestible format.</p>
<p>After witnessing the 2008 recession and massive cuts to local newspapers, I decided against going down that path. But I ended up finding a career path where telling stories was still hugely important.</p>
<p>Humans are storytellers. Stories tend to stick in a person’s brain more effectively and can persuade leadership to make appropriate business decisions with your statistical analyses.</p>
<p>You can certainly tell a person with pure statistical outputs what is going on; this was what was required of presentations that were given when I was in graduate school. However, unless you’re surrounded by people with similar technical ability, the meaning will be drawn out and muddled. Leadership has <em>maybe</em> 15 minutes to consider what you’re talking about, and odds are most of them think a pie chart is the best way to visualize data.</p>
<p>Data scientists are expected to communicate the boundary between analysis and actionable steps. You need to tailor your presentations to leadership to ensure that a cohesive and compelling narrative is being told. A story will motivate leadership to act; an analysis will just be “another meeting” to them.</p>
</section>
<section id="everybody-loves-python" class="level2">
<h2 class="anchored" data-anchor-id="everybody-loves-python">3. Everybody Loves Python</h2>
<p>Back in March 2020, the COVID-19 pandemic changed all our lives forever. Many tragically passed due to the disease, employment situations rapidly changed (whether it be working from home or layoffs due to a recession), and social distancing is now part of the social lexicon.</p>
<p>During this time, the data scientists on our team were expected to forecast how COVID-19 would impact our various hospital systems. Having no background in epidemiology, we did a lot of research into understanding how diseases generally progressed as well as noting what pre-existing models were doing for modelling the impact on hospital beds.</p>
<p><strong>Nearly all these models were built in Python.</strong></p>
<p>Up to that point, I was almost exclusively an R user. This job didn’t care whether you used R or Python, and a lot of previous analyses by former data scientists were done in R, so there wasn’t much motivation to switch languages. The culture was set for using R, and early into my role I wasn’t about to change that.</p>
<p>I wasn’t completely clueless about Python, because when I was job hunting I knew places generally preferred Python to R. I understood the basic syntax of Python and could do an ad-hoc analysis hitting up pandas and scikit-learn if I needed to. However, I didn’t have an understanding of object-oriented programming and other Pythonic coding principles, so when these epidemiology algorithms were posted by computer scientists, it was very easy to get lost.</p>
<p>After a few months, we eventually went away from using open-source algorithms and developed in-house models built in R for forecasting hospital bed utilization. But that experience was a wake-up call for me.</p>
<p>You don’t just need to know how to code in Python with the basic data science packages (matplotlib, pandas, numpy, scikit-learn, etc) and crank out an analysis. <em>You need to be able to code in Python like a software developer does.</em></p>
<p>Over the past few months, one of my professional development goals has been to fill those gaps and learn object-oriented design in Python. It’s not been easy given that I don’t have a computer science background, and it’s very easy for me to still get tripped up by the various jargon. But I can already tell that my coding skills have improved by investing my time towards this.</p>
</section>
<section id="you-cant-know-everything" class="level2">
<h2 class="anchored" data-anchor-id="you-cant-know-everything">4. You Can’t Know Everything</h2>
<p>I know I just made a point above about knowing Python. Learning the language deeply is really the best bang for your buck you can make for your technical skillset as a data scientist.</p>
<p>But some job applications will list any tool under the sun that they expect a prospective data scientist to know. These can include the following:</p>
<ul>
<li>R</li>
<li>Python</li>
<li>SQL</li>
<li>Julia</li>
<li>SAS</li>
<li>MATLAB</li>
<li>Java</li>
<li>Tableau</li>
<li>Power BI</li>
<li>Hadoop</li>
<li>Spark</li>
<li>Hive</li>
<li>Excel</li>
<li>Docker</li>
<li>Git</li>
<li>etc…</li>
</ul>
<p>And that doesn’t even includ the specifics that might be expected of someone who knows that particular language. For example, if you know base Python they’ll also expect you to know:</p>
<ul>
<li>Tensorflow</li>
<li>Keras</li>
<li>PyTorch</li>
<li>Scikit-Learn</li>
<li>NLTK</li>
<li>Pandas</li>
<li>NumPy</li>
<li>SciPy</li>
<li>Matplotlib</li>
<li>Seaborn</li>
<li>Plotly</li>
<li>etc…</li>
</ul>
<p>And to be able to use those packages in Python appropriately you’ll need the data science technical skills to understand these very broad topics:</p>
<ul>
<li>Data Preprocessing/Cleaning</li>
<li>Data Visualization</li>
<li>Predictive Modelling</li>
<li>Supervised vs Unsupervised Learning</li>
<li>Natural Language Processing</li>
<li>Deep Learning and Neural Networks</li>
</ul>
<p>None of those broader data science skills are easily picked up overnight. Further, to be a master in all of those languages above, it would take a long time. It’s not feasible to know them all, and further, you don’t <strong>need</strong> to know them all.</p>
<p>Obviously, knowing the theoretical concepts is critical. You’ll need those with whatever language you choose, so don’t skimp on that piece of things. As far as languages go, here’s what I’ve settled on regarding data science programming in 2021:</p>
<ul>
<li>R for statistical analyses
<ul>
<li>I have 4 years of experience here and R is built for this. It feels wasteful not to use R for what it’s meant for.</li>
</ul></li>
<li>Python for deep learning and natural language processing
<ul>
<li>Python is ahead of the game compared to R in this regard. I know you can build a neural network in R without any trouble, but Python gets the latest and greatest algorithms built for it first. Plus, see point 3.</li>
</ul></li>
<li>SQL for obtaining data
<ul>
<li>No matter what language you use, you’ll need to pull data. Both R and Python can connect to ODBC sources for this.</li>
</ul></li>
<li>Git for version control
<ul>
<li>Again, no matter what language you use, being able to document and reproduce your code as the build goes along will be invaluable.</li>
</ul></li>
<li>Excel for the stupid simple stuff
<ul>
<li>It’s true - even as a data scientist some things will be easier to just do in Excel.</li>
</ul></li>
</ul>
<p>The rest of the languages and their usage depends on the company. For some of you reading, you may see no need to learn R, but for my current job knowing R is essential.</p>
<p>Anyway, if you’re searching for a data science job and get overwhelmed by all the “wants” in a job description, I recommend focusing on those I highlighted (prioritizing Python and SQL first) and the data science technical skills needed to use those languages effectively.</p>
</section>
<section id="its-satisfying-work" class="level2">
<h2 class="anchored" data-anchor-id="its-satisfying-work">5. It’s Satisfying Work</h2>
<p>You tackle a bunch of unique and challenging problems as a data scientist. Different solutions are required depending on the use case, and that makes every day into the office a bit different than the last.</p>
<p>The specific types of asks you get are going to depend on the field that you go into. Healthcare (my field) has different data science problems than being in transportation would, for example.</p>
<p>But all the asks go towards bringing value to an organization that previously isn’t able to extract meaning from the data that they’re collecting. And I think that makes being a data scientist incredibly rewarding.</p>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>I know it’s seen as a “fad” to be a data scientist due to the amount of people wanting to get their foot in the door in this career niche. I certainly see data science job duties evolving to require more software engineering skills in the future. But I don’t think the career itself is toast. Data analytics is still a growing field, and while getting specifically into data science might be really hard, it’s still possible to start off in a similar analytics role (like data analyst) and work your way up towards being a data scientist.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>